{% load navbar %}

{% block navbar %}
  <!--  Begin Navigation Bar  -------------------->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-links" aria-controls="navbar-links" aria-expanded="false" aria-label="toggle navigation"></button>
    <div class="collapse navbar-collapse" id="navbar-links">
      <ul class="navbar-nav">
        <li class="nav-item{% if request.resolver_match.app_name == 'pages' and request.resolver_match.url_name == 'home' %} active{% endif %}">
          <a class="nav-link" href="{% url 'pages:home' %}">Home</a>
        </li>
        <li class="nav-item{% if request.resolver_match.app_name == 'pages' and request.resolver_match.url_name == 'contact' %} active{% endif %}">
          <a class="nav-link" href="{% url 'pages:contact' %}">Contact</a>
        </li>
        <li class="nav-item{% if request.resolver_match.app_name == 'pages' and request.resolver_match.url_name == 'about' %} active{% endif %}">
          <a class="nav-link" href="{% url 'pages:about' %}">About Us</a>
        </li>

        {% get_nav_links as nav_links %}
        {% for link in nav_links %}
          <li class="nav-item{% if request.resolver_match.app_name == 'pages' and request.resolver_match.kwargs.slug == link.slug %} active{% endif %}">
            <a class="nav-link" href="{{ link.get_absolute_url }}">{{ link.title }}</a>
          </li>
        {% endfor %}

        <ul class="navbar-nav ml-auto">
          {% if user.is_authenticated %}
            <li class="nav-item{% if request.resolver_match.app_name == 'messaging' %} active{% endif %}">
              <a class="nav-link" href="{% url "messaging:inbox" %}">
                <i class="fas fa-envelope fa-lg"></i>
                <span class="badge badge-pill badge-danger unread-messages-counter{% if not user.mailbox.unread %} d-none{% endif %}">{{ user.mailbox.unread }}</span>
              </a>
            </li>
          {% endif %}
        </ul>

      </ul>
    </div>
  </nav>
{% endblock %}
